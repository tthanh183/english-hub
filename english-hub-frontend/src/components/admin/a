<div className="flex flex-col min-h-screen">
      <main className="flex-1 container px-4 py-6 md:px-6 md:py-8">
        <div className="flex items-center gap-2 mb-6">
          <Link to="/exercises">
            <Button variant="ghost" size="icon" className="h-8 w-8">
              <ArrowLeft className="h-4 w-4" />
            </Button>
          </Link>
          <h1 className="text-2xl font-bold">Create New Exercise</h1>
        </div>

        <div className="grid gap-6">
          <Card>
            <CardHeader>
              <CardTitle>Exercise Details</CardTitle>
              <CardDescription>
                Provide basic information about this exercise
              </CardDescription>
            </CardHeader>
            <CardContent>
              <div className="grid gap-4">
                <div className="grid grid-cols-1 md:grid-cols-2 gap-4">
                  <div className="space-y-2">
                    <Label htmlFor="part">TOEIC Part</Label>
                    <Select
                      defaultValue="part1"
                      onValueChange={value => setSelectedPart(value)}
                    >
                      <SelectTrigger id="part">
                        <SelectValue placeholder="Select part" />
                      </SelectTrigger>
                      <SelectContent>
                        <SelectItem value="part1">
                          Part 1: Photographs
                        </SelectItem>
                        <SelectItem value="part2">
                          Part 2: Question-Response
                        </SelectItem>
                        <SelectItem value="part3">
                          Part 3: Conversations
                        </SelectItem>
                        <SelectItem value="part4">Part 4: Talks</SelectItem>
                        <SelectItem value="part5">
                          Part 5: Incomplete Sentences
                        </SelectItem>
                        <SelectItem value="part6">
                          Part 6: Text Completion
                        </SelectItem>
                        <SelectItem value="part7">
                          Part 7: Reading Comprehension
                        </SelectItem>
                      </SelectContent>
                    </Select>
                  </div>
                  <div className="space-y-2">
                    <Label htmlFor="difficulty">Difficulty Level</Label>
                    <Select defaultValue="medium">
                      <SelectTrigger id="difficulty">
                        <SelectValue placeholder="Select difficulty" />
                      </SelectTrigger>
                      <SelectContent>
                        <SelectItem value="easy">Easy</SelectItem>
                        <SelectItem value="medium">Medium</SelectItem>
                        <SelectItem value="hard">Hard</SelectItem>
                      </SelectContent>
                    </Select>
                  </div>
                </div>
                <div className="space-y-2">
                  <Label htmlFor="title">Exercise Title</Label>
                  <Input id="title" placeholder="Enter a descriptive title" />
                </div>
                <div className="space-y-2">
                  <Label htmlFor="description">Description (optional)</Label>
                  <Textarea
                    id="description"
                    placeholder="Enter a brief description of this exercise"
                    rows={3}
                  />
                </div>
                <div className="space-y-2">
                  <Label htmlFor="tags">Tags (optional)</Label>
                  <Input
                    id="tags"
                    placeholder="business, office, travel, etc."
                  />
                </div>
                <div className="space-y-2">
                  <Label htmlFor="time-limit">Time Limit (minutes)</Label>
                  <Input
                    id="time-limit"
                    type="number"
                    placeholder="Enter time limit"
                    defaultValue="30"
                  />
                </div>
              </div>
            </CardContent>
          </Card>

          <Card>
            <CardHeader>
              <CardTitle>Select Questions</CardTitle>
              <CardDescription>
                Choose questions from the question bank to include in this
                exercise
              </CardDescription>
            </CardHeader>
            <CardContent>
              <div className="grid gap-6">
                <div className="flex flex-col md:flex-row gap-4 items-start md:items-center justify-between">
                  <div className="relative w-full md:w-[300px]">
                    <Search className="absolute left-2.5 top-2.5 h-4 w-4 text-gray-500 dark:text-gray-400" />
                    <Input
                      type="search"
                      placeholder="Search questions..."
                      className="w-full pl-8"
                    />
                  </div>
                  <div className="flex items-center gap-2 w-full md:w-auto">
                    <Select defaultValue="all">
                      <SelectTrigger className="w-full md:w-[180px]">
                        <SelectValue placeholder="All Types" />
                      </SelectTrigger>
                      <SelectContent>
                        <SelectItem value="all">All Types</SelectItem>
                        <SelectItem value="photograph">Photographs</SelectItem>
                        <SelectItem value="question-response">
                          Question-Response
                        </SelectItem>
                        <SelectItem value="conversation">
                          Conversations
                        </SelectItem>
                        <SelectItem value="talk">Talks</SelectItem>
                        <SelectItem value="incomplete-sentence">
                          Incomplete Sentences
                        </SelectItem>
                        <SelectItem value="text-completion">
                          Text Completion
                        </SelectItem>
                        <SelectItem value="reading">
                          Reading Comprehension
                        </SelectItem>
                      </SelectContent>
                    </Select>
                  </div>
                </div>

                <div className="border rounded-md">
                  <div className="bg-muted p-3 border-b">
                    <h3 className="font-medium">Available Questions</h3>
                  </div>
                  <div className="divide-y max-h-[300px] overflow-y-auto">
                    {availableQuestions.map(question => (
                      <div key={question.id} className="flex items-center p-3">
                        <Checkbox
                          id={`question-${question.id}`}
                          checked={selectedQuestions.includes(question.id)}
                          onCheckedChange={() =>
                            toggleQuestionSelection(question.id)
                          }
                          className="mr-3"
                        />
                        <div className="grid gap-0.5">
                          <Label
                            htmlFor={`question-${question.id}`}
                            className="font-medium cursor-pointer"
                          >
                            {question.title}
                          </Label>
                          <div className="text-xs text-muted-foreground">
                            {question.type}
                          </div>
                        </div>
                      </div>
                    ))}
                  </div>
                </div>

                <div className="border rounded-md">
                  <div className="bg-muted p-3 border-b flex items-center justify-between">
                    <h3 className="font-medium">
                      Selected Questions ({selectedQuestions.length})
                    </h3>
                    <div className="text-sm text-muted-foreground">
                      Drag to reorder
                    </div>
                  </div>
                  <div className="divide-y max-h-[300px] overflow-y-auto">
                    {selectedQuestions.map(id => {
                      const question = availableQuestions.find(
                        q => q.id === id
                      );
                      if (!question) return null;

                      return (
                        <div
                          key={`selected-${id}`}
                          className="flex items-center p-3"
                        >
                          <div className="flex-1 grid gap-0.5">
                            <div className="font-medium">{question.title}</div>
                            <div className="text-xs text-muted-foreground">
                              {question.type}
                            </div>
                          </div>
                          <div className="flex items-center gap-1">
                            <Button
                              variant="ghost"
                              size="icon"
                              className="h-8 w-8"
                              onClick={() => moveQuestion(id, 'up')}
                            >
                              <ArrowUp className="h-4 w-4" />
                            </Button>
                            <Button
                              variant="ghost"
                              size="icon"
                              className="h-8 w-8"
                              onClick={() => moveQuestion(id, 'down')}
                            >
                              <ArrowDown className="h-4 w-4" />
                            </Button>
                            <Button
                              variant="ghost"
                              size="icon"
                              className="h-8 w-8 text-red-600"
                              onClick={() => toggleQuestionSelection(id)}
                            >
                              <Trash className="h-4 w-4" />
                            </Button>
                          </div>
                        </div>
                      );
                    })}
                    {selectedQuestions.length === 0 && (
                      <div className="p-6 text-center text-muted-foreground">
                        No questions selected. Select questions from the list
                        above.
                      </div>
                    )}
                  </div>
                </div>
              </div>
            </CardContent>
          </Card>

          <div className="flex justify-end gap-2">
            <Button variant="outline">Save as Draft</Button>
            <Link href="/exercises/preview/new">
              <Button variant="outline" className="gap-1">
                <Eye className="h-4 w-4" /> Preview
              </Button>
            </Link>
            <Button className="gap-1">
              <Save className="h-4 w-4" /> Save Exercise
            </Button>
          </div>
        </div>
      </main>
    </div>